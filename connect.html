<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Подключение кошелька</title>
  <!-- 1) Подключаем UMD-бандл standalone -->
  <script src="https://unpkg.com/@web3modal/standalone@2/dist/index.umd.min.js"></script>
  <style>
    /* Опционально: центрируем страницу */
    body { display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#000; }
  </style>
</head>
<body>
  <script>
    ;(async ()=>{
      // 2) Инициализируем Web3Modal
      const modal = new Web3Modal({
        projectId: "95f126f3a088cebcf781d2a1c10711fc",  // ваш Project ID
        themeMode: "dark",
        walletConnectVersion: 2
      });

      // 3) Подписываемся на событие подключения
      modal.on("connect", async ({ provider, chainId, account }) => {
        // прокидываем в window.ethereum, чтобы ваш wallet.js его увидел
        window.ethereum = provider;
        // перенаправляем обратно на shop.html
        const redirect = new URLSearchParams(location.search).get("r") || "shop.html";
        location.href = redirect;
      });

      // 4) Открываем модалку
      modal.openModal();
    })();
  </script>
</body>
</html>
